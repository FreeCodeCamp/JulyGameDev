<!DOCTYPE html>
<html lang="en-us">
    <head>
    	<meta charset="utf-8">
    	<title>Twitch GameDev Marathon! - Server List</title>
    	
    	<script src="libs/jquery.min.js"></script>
    	<link rel="stylesheet" href="styles/style.css" type="text/css"/>
        <link href='//fonts.googleapis.com/css?family=Roboto+Condensed' rel='stylesheet' type='text/css'/>
        
        <script>
            
            $(document).ready(function(){
                $.get('/api/list', function(data){
                    $.each(JSON.parse(data), function(i, e){
                        $("#list").append(
                            $('<tr>').html([
                                $('<td>').html(e.props.name),
                                $('<td>').html(2),
                                $('<td>').html(e.props.currentplayers),
                                $('<td>').html(
                                    $('<a>')
                                    // we cut off the 'server_' part because its ugly
                                    .attr('href', window.location.origin + '/index.html#c=' + e.id.substr(7))
                                    .html('Connect')
                                ),
                            ])
                        );
                    });
                });
            });
            
        </script>
        
        <script> 
			$(function(){
  				$("#header").load("header.html", function(){
  				    $(".servers").addClass("current");
  				});
  				$("#footer").load("footer.html"); 
			});
		</script>
    </head>
    <body>
        <div id="header"></div>
            <table id="list" class="server-list" border="1">
                <tr class='serverlist'>
                    <td class='t-name'>Name</td>
                    <td class='t-size'>Maxsize</td>
                    <td class='t-players'>Current Players</td>
                    <td class='t-join'>Join</td>
                </tr>
            </table>
        <div id="footer"></div>
    </body>
</html>